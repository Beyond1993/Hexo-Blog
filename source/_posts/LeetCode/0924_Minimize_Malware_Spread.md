---
title: 0924 Minimize Malware Spread
date: 2025-02-12 10:58:12
categories: LeetCode
tags:
---

é—®é¢˜æ¦‚è¿°ï¼š
ç»™å®šä¸€ä¸ªå›¾ graphï¼Œè¡¨ç¤ºä¸€ä¸ªç½‘ç»œï¼Œå…¶ä¸­ graph[i][j] == 1 è¡¨ç¤ºèŠ‚ç‚¹ i å’ŒèŠ‚ç‚¹ j ä¹‹é—´æœ‰è¿žæŽ¥ï¼Œgraph[i][j] == 0 è¡¨ç¤ºæ²¡æœ‰è¿žæŽ¥ã€‚
ç»™å®šä¸€ä¸ªåˆå§‹æ•°ç»„ initialï¼Œè¡¨ç¤ºæ¶æ„è½¯ä»¶æœ€åˆä¼ æ’­çš„èŠ‚ç‚¹ã€‚
ä»»åŠ¡æ˜¯è¿”å›žåˆå§‹èŠ‚ç‚¹ä¸­ï¼Œç§»é™¤ä¸€ä¸ªèŠ‚ç‚¹åŽï¼Œèƒ½æœ€å°åŒ–æ¶æ„è½¯ä»¶ä¼ æ’­çš„èŠ‚ç‚¹ã€‚å¦‚æžœæœ‰å¤šä¸ªèŠ‚ç‚¹å¯ä»¥é€‰æ‹©ï¼Œè¿”å›žç´¢å¼•æœ€å°çš„èŠ‚ç‚¹ã€‚

è§£é¢˜æ€è·¯ï¼š
å›¾çš„ç»„ä»¶è¯†åˆ«ï¼š

é€šè¿‡ æ·±åº¦ä¼˜å…ˆæœç´¢ (DFS) éåŽ†å›¾ï¼Œæ‰¾åˆ°æ¯ä¸ªè¿žé€šç»„ä»¶ï¼Œå¹¶ä¸ºæ¯ä¸ªç»„ä»¶åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„é¢œè‰²ã€‚
colors[] æ•°ç»„ç”¨äºŽè®°å½•æ¯ä¸ªèŠ‚ç‚¹æ‰€å±žçš„ç»„ä»¶é¢œè‰²ã€‚
è®¡ç®—æ¯ä¸ªç»„ä»¶çš„å¤§å°ï¼š

éåŽ† colors[] æ•°ç»„ï¼Œç»Ÿè®¡æ¯ä¸ªç»„ä»¶ä¸­åŒ…å«çš„èŠ‚ç‚¹æ•°ï¼Œä¿å­˜åœ¨ size[] æ•°ç»„ä¸­ã€‚
è®¡ç®—æ¯ä¸ªç»„ä»¶ä¸­æœ‰å¤šå°‘åˆå§‹æ¶æ„èŠ‚ç‚¹ï¼š

é€šè¿‡éåŽ† initial æ•°ç»„ï¼Œç»Ÿè®¡æ¯ä¸ªç»„ä»¶ä¸­æœ‰å¤šå°‘æ¶æ„èŠ‚ç‚¹ï¼Œä¿å­˜åœ¨ colorCount[] æ•°ç»„ä¸­ã€‚
æ‰¾å‡ºç§»é™¤æŸä¸ªèŠ‚ç‚¹åŽæ¶æ„è½¯ä»¶ä¼ æ’­æœ€å°çš„èŠ‚ç‚¹ï¼š

éåŽ† initial ä¸­çš„èŠ‚ç‚¹ï¼Œæ£€æŸ¥å®ƒæ˜¯å¦æ˜¯å…¶æ‰€åœ¨ç»„ä»¶å”¯ä¸€çš„æ¶æ„èŠ‚ç‚¹ã€‚å¦‚æžœæ˜¯ï¼Œåˆ™å¯ä»¥é€šè¿‡ç§»é™¤è¯¥èŠ‚ç‚¹æ¥å‡å°‘æ¶æ„è½¯ä»¶çš„ä¼ æ’­ã€‚
å¦‚æžœå¤šä¸ªèŠ‚ç‚¹æœ‰ç›¸åŒçš„æ•ˆæžœï¼ˆå³éƒ½èƒ½å‡å°‘æ¶æ„è½¯ä»¶ä¼ æ’­ï¼‰ï¼Œåˆ™é€‰æ‹©å…¶æ‰€åœ¨ç»„ä»¶èŠ‚ç‚¹æ•°è¾ƒå¤§çš„èŠ‚ç‚¹ï¼›å¦‚æžœç»„ä»¶å¤§å°ç›¸åŒï¼Œé€‰æ‹©ç´¢å¼•è¾ƒå°çš„èŠ‚ç‚¹ã€‚
å¤„ç†æ²¡æœ‰å”¯ä¸€æ¶æ„èŠ‚ç‚¹çš„æƒ…å†µï¼š

å¦‚æžœæ‰€æœ‰åˆå§‹èŠ‚ç‚¹éƒ½ä¸æ˜¯æ‰€åœ¨ç»„ä»¶å”¯ä¸€çš„æ¶æ„èŠ‚ç‚¹ï¼Œåˆ™é€‰æ‹© initial ä¸­æœ€å°çš„èŠ‚ç‚¹ã€‚
æ—¶é—´å¤æ‚åº¦ï¼š
DFSï¼šè¿™éƒ¨åˆ†çš„æ—¶é—´å¤æ‚åº¦ä¸º 
O(N ^2)ï¼Œå› ä¸ºå›¾æ˜¯é€šè¿‡é‚»æŽ¥çŸ©é˜µè¡¨ç¤ºï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸ªèŠ‚ç‚¹è¿›è¡Œæ·±åº¦ä¼˜å…ˆæœç´¢ã€‚
åŽå¤„ç†ï¼šè®¡ç®—ç»„ä»¶å¤§å°ã€æ£€æŸ¥æ¯ä¸ªèŠ‚ç‚¹çš„æ¶æ„èŠ‚ç‚¹æ•°é‡ç­‰æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N)ã€‚ å› æ­¤ï¼Œæ•´ä½“æ—¶é—´å¤æ‚åº¦ä¸º 
O(N^2)ï¼Œå…¶ä¸­ ð‘ æ˜¯èŠ‚ç‚¹æ•°ã€‚


**å¤§æ¦‚æè¿°ä¸€ä¸‹ï¼Œå°±æ˜¯è¦æ¸…ç†ç½‘ç»œä¸­çš„ç—…æ¯’èŠ‚ç‚¹ï¼Œåªèƒ½æ¸…ç†ä¸€ä¸ªï¼Œç—…æ¯’åœ¨ç›¸è¿žèŠ‚ç‚¹ä¹‹é—´å¯ä»¥ä¼ æ’­ï¼Œæ‰€ä»¥åªèƒ½æ¸…æ¥šé‚£äº›åªæœ‰ä¸€ä¸ªç—…æ¯’èŠ‚ç‚¹çš„
å­ç½‘ç»œï¼Œå¦‚æžœæœ‰å¥½å‡ ä¸ªå­ç½‘ç»œåªæœ‰ä¸€ä¸ªç—…æ¯’èŠ‚ç‚¹ï¼Œè¿”å›žæœ€å°indexï¼Œ å¦‚æžœæ‰€æœ‰å­ç½‘ç»œéƒ½æœ‰å¤§äºŽç­‰äºŽ2 ä¸ª ç—…æ¯’èŠ‚ç‚¹ï¼Œé€‰æ‹©initial ä¸­æœ€å°çš„ã€‚**

```python
from typing import List

class Solution:
    def minMalwareSpread(self, graph: List[List[int]], initial: List[int]) -> int:
        # 1. ç»™æ¯ä¸ªç»„ä»¶ä¸Šè‰²
        N = len(graph)  # å›¾çš„èŠ‚ç‚¹æ•°
        colors = [-1] * N  # æ¯ä¸ªèŠ‚ç‚¹çš„é¢œè‰²ï¼Œ-1 è¡¨ç¤ºæœªè®¿é—®
        C = 0  # ç»„ä»¶è®¡æ•°

        # éåŽ†æ¯ä¸ªèŠ‚ç‚¹ï¼Œå¯¹æ¯ä¸ªæœªä¸Šè‰²çš„èŠ‚ç‚¹æ‰§è¡Œ DFSï¼Œæ ‡è®°è¿žé€šç»„ä»¶
        for node in range(N):
            if colors[node] == -1:
                self.dfs(graph, colors, node, C)
                C += 1

        # 2. è®¡ç®—æ¯ä¸ªç»„ä»¶çš„å¤§å°
        size = [0] * C  # size[i] è¡¨ç¤ºé¢œè‰²ä¸º i çš„ç»„ä»¶çš„èŠ‚ç‚¹æ•°é‡
        for color in colors:
            size[color] += 1

        # 3. è®¡ç®—æ¯ä¸ªç»„ä»¶ä¸­æœ‰å¤šå°‘åˆå§‹æ¶æ„èŠ‚ç‚¹
        colorCount = [0] * C  # colorCount[i] è¡¨ç¤ºç»„ä»¶ i ä¸­æ¶æ„èŠ‚ç‚¹çš„æ•°é‡
        for node in initial:
            colorCount[colors[node]] += 1

        # 4. æ‰¾å‡ºæœ€åˆé€‚çš„èŠ‚ç‚¹
        ans = float('inf')  # åˆå§‹å€¼ä¸ºæ­£æ— ç©·ï¼Œè¡¨ç¤ºæœªæ‰¾åˆ°ç­”æ¡ˆ
        for node in initial:
            c = colors[node]
            if colorCount[c] == 1:  # åªæœ‰è¯¥ç»„ä»¶æœ‰ä¸€ä¸ªæ¶æ„èŠ‚ç‚¹æ—¶
                if ans == float('inf'):
                    ans = node  # æ‰¾åˆ°ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹
                elif size[c] > size[colors[ans]]:  # ä¼˜å…ˆé€‰æ‹©æ›´å¤§ç»„ä»¶çš„èŠ‚ç‚¹
                    ans = node
                elif size[c] == size[colors[ans]] and node < ans:  # å¦‚æžœç»„ä»¶å¤§å°ç›¸åŒï¼Œé€‰æ‹©ç´¢å¼•æ›´å°çš„èŠ‚ç‚¹
                    ans = node

        # å¦‚æžœæ²¡æœ‰æ‰¾åˆ°å”¯ä¸€çš„æ¶æ„èŠ‚ç‚¹ï¼Œè¿”å›ž initial ä¸­æœ€å°çš„èŠ‚ç‚¹
        if ans == float('inf'):
            for node in initial:
                ans = min(ans, node)

        return ans

    # æ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œæ ‡è®°æ¯ä¸ªèŠ‚ç‚¹æ‰€åœ¨çš„ç»„ä»¶
    def dfs(self, graph: List[List[int]], colors: List[int], node: int, color: int):
        colors[node] = color  # ä¸ºå½“å‰èŠ‚ç‚¹ä¸Šè‰²
        for nei in range(len(graph)):  # éåŽ†æ‰€æœ‰ç›¸é‚»èŠ‚ç‚¹
            if graph[node][nei] == 1 and colors[nei] == -1:  # å¦‚æžœèŠ‚ç‚¹ç›¸é‚»ä¸”æœªä¸Šè‰²
                self.dfs(graph, colors, nei, color)
```
