---
title: Interview-Pinterest
date: 2017-10-16 06:20:11
categories: Interview
tags:
---

这题是pinterest 的面试题．

第一种类型：在海量数据中找中位数．

只有2G内存的pc机，在一个存有10G个整数的文件，从中找到中位数，写一个算法．



第二种类型：在分布式数据中找中位数



面试时经常被问到的一个问题：几万亿的数据分布到几千台网络连接的计算机中，怎么最少的数据交换，最快的速度找到这些数据的中位数？



估算这些数据要多少台机器. 

一万亿（10^12）个整数，按每个整数4个字节，4x10^12字节＝4x10^9KB=4x10^6MB=4x10^3GB，如果每个机器内存4GB的话，需要存放到1000台机器上。所以，不是简单的排序就好解决的问题.



我回答的是全排序，我想面试官肯定是一脸懵逼吧．






１．快排的partition 思想



先了解下　顺序统计量


在统计学中，样本的第k顺序统计量（英语：Order Statistics）即它从小到大排列时的第k个值，常用于非参数估计与推断中。常见的顺序统计量包括样本的最大值、最小值、中位数等。



n个元素，第１顺序统计量就是最小元素，第n顺序统计量就是最大元素．对于 2n 的元素，　第n顺序统计量就是中位数．



这里仅仅是用了快排的思想，而并不需要真正的进行快排．



情况一：piovt 就是中位数

例子　：　［4 3 1 1 5 9 2 6 5 3 5］中位数就是第６顺序统计量．

将第一个元素作为分区的 piovt

［3 1 1 2 3 4 5 9 6 5 5］

刚好第６顺序统计量就是４，就刚好是中位数．



情况二：piovt 在中位数右边


考虑支点在中位数位置右边的情形
L1 ＝ ［6 3 1 1 5 9 2 4 5 3 7］
如果用第一个元素6来分区，我们得到
L1 ＝ ［3 1 1 5 5 2 4 3 6 9 7］
这次，6移到了第9顺序统计量。因为我们找寻的是第6顺序统计量，我们知道6不是中位数。更因为第9顺序统计量在第6顺序统计量的右边，所以我们知道中位数必须小于6。因此，我们不但知道6不是中位数，中位数也不可能是9或者7。这很重要，因为我们可以完全扔掉这些值。
L2 ＝ L1 － ［6 9 7］
L2 ＝ ［3 1 1 5 5 2 4 3］
L1的第6顺序统计量，也就是中位数，这时变成了L2的第6顺序统计量。因为我们扔掉了中间值之后的所有值，我们可以继续寻找同样的顺序统计量。注意了，L2的第6顺序统计量并不是L2的中位数。L2的中位数应该是第4顺序统计量。
???

http://blog.csdn.net/v_july_v/article/details/7382693

???


参考:

http://songlee24.github.io/2014/06/22/Kth-Order-Statistic/

http://chuansong.me/n/415438436839
